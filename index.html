<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Gestor de Gastos</title>
</head>
<body>
  <h1>Gestor de Gastos</h1>

  <formulario-gasto></formulario-gasto>
  <lista-gastos></lista-gastos>

  <button id="guardarGastos">Guardar</button>
  <button id="cargarGastos">Recuperar</button>
  
   <!--Script que define los Web Components -->
  <script type="module" src="./js/gestionPresupuestoWebV2.js"></script>

  <script type="module">
    import { listarGastos, sobrescribirGastos } from './js/gestionPresupuesto.js';

    const CLAVE_LOCAL = 'misGastosApp'; // clave Ãºnica para almacenamiento

    // Guardar gastos en localStorage
    document.getElementById('guardarGastos').onclick = () =>
      localStorage.setItem(CLAVE_LOCAL, JSON.stringify(listarGastos()));

    // Recuperar gastos desde localStorage
    document.getElementById('cargarGastos').onclick = () => {
      const datos = localStorage.getItem(CLAVE_LOCAL);
      if (!datos) return; // si no hay datos, no hace nada
      sobrescribirGastos(JSON.parse(datos));        // reconstruye objetos
      document.querySelector('lista-gastos').render(); // actualizar lista visible
    };
  </script>
</body>
</html>
